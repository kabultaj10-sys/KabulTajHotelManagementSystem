{% extends 'base.html' %}

{% block title %}{{ title }} - Kabul Taj Hotel{% endblock %}

{% block content %}
<!-- Module Header -->
<div class="card">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-lg);">
        <div>
            <h1 style="font-size: 2rem; font-weight: var(--font-weight-bold); color: var(--color-foreground); margin-bottom: var(--spacing-xs);">
                {{ title }}
            </h1>
            <p style="color: var(--color-foreground-secondary); font-size: 1rem;">
                {% if form.instance.pk %}Update staff information{% else %}Add a new staff member{% endif %}
            </p>
        </div>
    </div>
</div>

<!-- Staff Form -->
<div class="card">
    <form method="post" style="display: flex; flex-direction: column; gap: var(--spacing-lg);">
        {% csrf_token %}
        
        <!-- Basic Information -->
        <div>
            <h3 style="font-size: 1.25rem; font-weight: var(--font-weight-semibold); color: var(--color-foreground); margin-bottom: var(--spacing-md);">
                Basic Information
            </h3>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing-md);">
                <!-- User Selection -->
                <div>
                    <label for="id_user" style="display: block; font-weight: var(--font-weight-medium); color: var(--color-foreground); margin-bottom: var(--spacing-sm);">
                        User
                    </label>
                    <select name="user" id="id_user" style="width: 100%; padding: var(--spacing-sm) var(--spacing-md); background-color: var(--color-input-background); border: 1px solid var(--color-input-border); border-radius: var(--radius-md); color: var(--color-foreground); font-size: 0.875rem;">
                        <option value="">Select a user</option>
                        {% for user in form.user.field.queryset %}
                            <option value="{{ user.id }}" {% if form.user.value == user.id %}selected{% endif %}>
                                {{ user.get_full_name }} ({{ user.username }})
                            </option>
                        {% endfor %}
                    </select>
                </div>

                <!-- Employee ID -->
                <div>
                    <label for="id_employee_id" style="display: block; font-weight: var(--font-weight-medium); color: var(--color-foreground); margin-bottom: var(--spacing-sm);">
                        Employee ID
                    </label>
                    <input type="text" name="employee_id" id="id_employee_id" value="{{ form.employee_id.value|default:'' }}" 
                           style="width: 100%; padding: var(--spacing-sm) var(--spacing-md); background-color: var(--color-input-background); border: 1px solid var(--color-input-border); border-radius: var(--radius-md); color: var(--color-foreground); font-size: 0.875rem;"
                           placeholder="Enter employee ID">
                </div>

                <!-- Department -->
                <div>
                    <label for="id_department" style="display: block; font-weight: var(--font-weight-medium); color: var(--color-foreground); margin-bottom: var(--spacing-sm);">
                        Department
                    </label>
                    <select name="department" id="id_department" style="width: 100%; padding: var(--spacing-sm) var(--spacing-md); background-color: var(--color-input-background); border: 1px solid var(--color-input-border); border-radius: var(--radius-md); color: var(--color-foreground); font-size: 0.875rem;">
                        <option value="">Select department</option>
                        {% for dept in form.department.field.queryset %}
                            <option value="{{ dept.id }}" {% if form.department.value == dept.id %}selected{% endif %}>
                                {{ dept.name }}
                            </option>
                        {% endfor %}
                    </select>
                </div>

                <!-- Position -->
                <div>
                    <label for="id_position" style="display: block; font-weight: var(--font-weight-medium); color: var(--color-foreground); margin-bottom: var(--spacing-sm);">
                        Position
                    </label>
                    <input type="text" name="position" id="id_position" value="{{ form.position.value|default:'' }}" 
                           style="width: 100%; padding: var(--spacing-sm) var(--spacing-md); background-color: var(--color-input-background); border: 1px solid var(--color-input-border); border-radius: var(--radius-md); color: var(--color-foreground); font-size: 0.875rem;"
                           placeholder="Enter position">
                </div>
            </div>
        </div>

        <!-- Employment Details -->
        <div style="border-top: 1px solid var(--color-card-border); padding-top: var(--spacing-lg);">
            <h3 style="font-size: 1.25rem; font-weight: var(--font-weight-semibold); color: var(--color-foreground); margin-bottom: var(--spacing-md);">
                Employment Details
            </h3>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing-md);">
                <!-- Hire Date -->
                <div>
                    <label for="id_hire_date" style="display: block; font-weight: var(--font-weight-medium); color: var(--color-foreground); margin-bottom: var(--spacing-sm);">
                        Hire Date
                    </label>
                    <input type="date" name="hire_date" id="id_hire_date" value="{{ form.hire_date.value|date:'Y-m-d'|default:'' }}" 
                           style="width: 100%; padding: var(--spacing-sm) var(--spacing-md); background-color: var(--color-input-background); border: 1px solid var(--color-input-border); border-radius: var(--radius-md); color: var(--color-foreground); font-size: 0.875rem;">
                </div>

                <!-- Salary -->
                <div>
                    <label for="id_salary" style="display: block; font-weight: var(--font-weight-medium); color: var(--color-foreground); margin-bottom: var(--spacing-sm);">
                        Salary
                    </label>
                    <input type="number" name="salary" id="id_salary" value="{{ form.salary.value|default:'' }}" 
                           style="width: 100%; padding: var(--spacing-sm) var(--spacing-md); background-color: var(--color-input-background); border: 1px solid var(--color-input-border); border-radius: var(--radius-md); color: var(--color-foreground); font-size: 0.875rem;"
                           placeholder="Enter salary" step="0.01">
                </div>

                <!-- Status -->
                <div>
                    <label for="id_status" style="display: block; font-weight: var(--font-weight-medium); color: var(--color-foreground); margin-bottom: var(--spacing-sm);">
                        Status
                    </label>
                    <select name="status" id="id_status" style="width: 100%; padding: var(--spacing-sm) var(--spacing-md); background-color: var(--color-input-background); border: 1px solid var(--color-input-border); border-radius: var(--radius-md); color: var(--color-foreground); font-size: 0.875rem;">
                        <option value="active" {% if form.status.value == 'active' %}selected{% endif %}>Active</option>
                        <option value="inactive" {% if form.status.value == 'inactive' %}selected{% endif %}>Inactive</option>
                        <option value="on_leave" {% if form.status.value == 'on_leave' %}selected{% endif %}>On Leave</option>
                        <option value="terminated" {% if form.status.value == 'terminated' %}selected{% endif %}>Terminated</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Emergency Contact -->
        <div style="border-top: 1px solid var(--color-card-border); padding-top: var(--spacing-lg);">
            <h3 style="font-size: 1.25rem; font-weight: var(--font-weight-semibold); color: var(--color-foreground); margin-bottom: var(--spacing-md);">
                Emergency Contact
            </h3>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing-md);">
                <!-- Emergency Contact Name -->
                <div>
                    <label for="id_emergency_contact" style="display: block; font-weight: var(--font-weight-medium); color: var(--color-foreground); margin-bottom: var(--spacing-sm);">
                        Emergency Contact Name
                    </label>
                    <input type="text" name="emergency_contact" id="id_emergency_contact" value="{{ form.emergency_contact.value|default:'' }}" 
                           style="width: 100%; padding: var(--spacing-sm) var(--spacing-md); background-color: var(--color-input-background); border: 1px solid var(--color-input-border); border-radius: var(--radius-md); color: var(--color-foreground); font-size: 0.875rem;"
                           placeholder="Emergency contact name">
                </div>

                <!-- Emergency Phone -->
                <div>
                    <label for="id_emergency_phone" style="display: block; font-weight: var(--font-weight-medium); color: var(--color-foreground); margin-bottom: var(--spacing-sm);">
                        Emergency Phone
                    </label>
                    <input type="text" name="emergency_phone" id="id_emergency_phone" value="{{ form.emergency_phone.value|default:'' }}" 
                           style="width: 100%; padding: var(--spacing-sm) var(--spacing-md); background-color: var(--color-input-background); border: 1px solid var(--color-input-border); border-radius: var(--radius-md); color: var(--color-foreground); font-size: 0.875rem;"
                           placeholder="Emergency phone number">
                </div>
            </div>
        </div>

        <!-- Active Status -->
        <div style="display: flex; align-items: center; gap: var(--spacing-sm);">
            <input type="checkbox" name="is_active" id="id_is_active" 
                   {% if form.is_active.value %}checked{% endif %}
                   style="width: 1rem; height: 1rem; accent-color: var(--color-gold);">
            <label for="id_is_active" style="color: var(--color-foreground); font-size: 0.875rem; cursor: pointer;">Active Staff Member</label>
        </div>

        <!-- Form Errors -->
        {% if form.errors %}
        <div style="padding: var(--spacing-md); background-color: var(--color-danger-light); border: 1px solid var(--color-danger); border-radius: var(--radius-md); color: var(--color-danger);">
            <ul style="list-style: disc; list-style-position: inside;">
                {% for field, errors in form.errors.items %}
                    {% for error in errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                {% endfor %}
            </ul>
        </div>
        {% endif %}

        <!-- Submit Buttons -->
        <div style="display: flex; justify-content: end; gap: var(--spacing-md);">
            <a href="{% url 'staff_list' %}" class="btn btn-outline">
                Cancel
            </a>
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i>
                {% if form.instance.pk %}Update{% else %}Create{% endif %} Staff Member
            </button>
        </div>
    </form>
</div>
{% endblock %} 